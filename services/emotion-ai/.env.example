# ============================================================================
# AI分析服务 - 环境变量配置模板
# ============================================================================

# ----------------------------------------------------------------------------
# 后端API配置
# ----------------------------------------------------------------------------
# 后端API地址（用于写入分析结果）
BACKEND_API_URL="http://localhost:4001"

# AI服务认证Token（需与后端.env中的AI_SERVICE_TOKEN一致）
AI_SERVICE_TOKEN="dev-ai-service-token-2024"

# ----------------------------------------------------------------------------
# Redis配置（实时数据推送）
# ----------------------------------------------------------------------------
# ⚠️ 重要：Redis是AI实时监控功能的核心组件
# - 用于将实时分析结果推送给前端/ai-live页面
# - 如果Redis不可用，实时监控功能将被禁用（但不影响考试和离线分析）
# - 确保Redis服务已启动：pnpm docker:up

# Redis服务器地址
REDIS_HOST="localhost"

# Redis端口
REDIS_PORT="6380"

# Redis数据库编号（0-15）
REDIS_DB="0"

# Redis密码（可选，如果Redis未设置密码则留空）
REDIS_PASSWORD=""

# 是否启用实时数据推送功能
# - true: 启用（推荐生产环境开启）
# - false: 禁用（仅生成checkpoint文件，无实时监控）
REDIS_REALTIME_ENABLED="true"

# Redis连接池配置（可选，高级配置）
# 最大连接数
REDIS_MAX_CONNECTIONS="10"

# 连接超时（秒）
REDIS_CONNECT_TIMEOUT="5"

# 重试次数（Redis不可用时）
REDIS_RETRY_ATTEMPTS="3"

# ----------------------------------------------------------------------------
# MediaMTX配置
# ----------------------------------------------------------------------------
# RTSP流基础URL
MEDIAMTX_RTSP_BASE_URL="rtsp://192.168.0.97:8554"

# MediaMTX HTTP API地址（可选，用于流状态检查）
MEDIAMTX_API_URL="http://192.168.0.97:8889"

# ----------------------------------------------------------------------------
# 服务配置
# ----------------------------------------------------------------------------
# AI服务监听端口
PORT="5678"

# 服务主机
HOST="0.0.0.0"

# 环境模式
ENVIRONMENT="development"

# ----------------------------------------------------------------------------
# 分析配置
# ----------------------------------------------------------------------------
# 视频分析帧率（每秒处理帧数）
VIDEO_FPS="15"

# 音频采样间隔（秒）
AUDIO_SAMPLE_INTERVAL="1.0"

# 心率检测窗口大小（秒）
PPG_WINDOW_SIZE="30"

# ----------------------------------------------------------------------------
# 模型配置
# ----------------------------------------------------------------------------
# DeepFace后端（默认使用opencv）
DEEPFACE_BACKEND="yolov8"

# emotion2vec模型路径（留空使用默认）
EMOTION2VEC_MODEL_PATH="./models/emotion2vec_models"

# ----------------------------------------------------------------------------
# 数据存储配置
# ----------------------------------------------------------------------------
# 检查点文件保存路径（相对路径，相对于项目根目录）
CHECKPOINT_BASE_DIR="../data/ai_analysis/checkpoints"

# 批量写入大小（积累多少条数据后写入文件）
BATCH_SIZE="10"

# 写入间隔（秒，定期写入即使未达到批量大小）
WRITE_INTERVAL="5"

# ----------------------------------------------------------------------------
# 性能配置
# ----------------------------------------------------------------------------
# 多进程工作进程数（0表示自动检测CPU核心数）
WORKER_PROCESSES="0"

# 每个进程的线程数
THREADS_PER_WORKER="2"

# ----------------------------------------------------------------------------
# 日志配置
# ----------------------------------------------------------------------------
# 日志级别: DEBUG | INFO | WARNING | ERROR
LOG_LEVEL="INFO"

# 日志格式: json | text
LOG_FORMAT="json"
