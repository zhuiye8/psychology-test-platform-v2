# ======================================
# 心理测试平台 2.0 环境变量配置
# 复制此文件为 .env 并修改相应值
# ======================================

# ======================================
# 数据库配置 (新端口避免冲突)
# ======================================
DATABASE_URL="postgresql://psychology_user:psychology_refactor_pass@localhost:5435/psychology_refactor"
POSTGRES_USER=psychology_user
POSTGRES_PASSWORD=psychology_refactor_pass
POSTGRES_DB=psychology_refactor
POSTGRES_PORT=5435

# ======================================
# Redis配置 (新端口避免冲突)
# ======================================
REDIS_URL="redis://localhost:6380"
REDIS_HOST=localhost
REDIS_PORT=6380
REDIS_PASSWORD=

# ======================================
# 应用端口配置 (避免与旧项目冲突)
# ======================================
# 教师端Web应用
WEB_PORT=4000
WEB_URL=http://localhost:4000

# 后端API服务
API_PORT=4001
API_URL=http://localhost:4001

# 学生考试端
EXAM_CLIENT_PORT=4002
EXAM_CLIENT_URL=http://localhost:4002

# AI监控台
AI_MONITOR_PORT=5680
AI_MONITOR_URL=http://localhost:5680

# Prisma Studio
PRISMA_STUDIO_PORT=5555

# ======================================
# JWT认证配置
# ======================================
JWT_SECRET="your-super-secret-jwt-key-change-in-production"
JWT_EXPIRES_IN="15m"
JWT_REFRESH_SECRET="your-super-secret-refresh-key-change-in-production"
JWT_REFRESH_EXPIRES_IN="7d"

# Cookie配置
COOKIE_SECRET="your-cookie-secret-key-change-in-production"
COOKIE_DOMAIN=localhost
COOKIE_SECURE=false  # 生产环境设为true

# ======================================
# 系统配置
# ======================================
NODE_ENV=development
LOG_LEVEL=debug

# 文件上传配置
UPLOAD_DIR=./uploads
MAX_FILE_SIZE=10485760  # 10MB
ALLOWED_FILE_TYPES=jpg,jpeg,png,gif,pdf,doc,docx

# ======================================
# AI服务配置
# ======================================
AI_SERVICE_ENABLED=true
AI_SERVICE_URL=http://localhost:5679
AI_WEBSOCKET_URL=ws://localhost:5679/ws

# WebRTC配置
WEBRTC_ENABLED=true
MEDIAMTX_URL=http://localhost:8889
WEBRTC_STUN_SERVERS=stun:stun.l.google.com:19302

# ======================================
# 第三方服务配置
# ======================================
# 百度TTS配置
BAIDU_APP_ID=your_baidu_app_id
BAIDU_API_KEY=your_baidu_api_key
BAIDU_SECRET_KEY=your_baidu_secret_key

# 邮件服务配置(如果需要)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@gmail.com
SMTP_PASS=your_app_password

# ======================================
# 安全配置
# ======================================
# CORS配置
CORS_ORIGIN=http://localhost:4000,http://localhost:4002
CORS_CREDENTIALS=true

# 限流配置
RATE_LIMIT_WINDOW_MS=900000  # 15分钟
RATE_LIMIT_MAX=100           # 最大请求数

# CSRF配置
CSRF_SECRET="your-csrf-secret-change-in-production"

# ======================================
# 开发工具配置
# ======================================
# 是否启用API文档
SWAGGER_ENABLED=true
SWAGGER_PATH=/api/docs

# 是否启用健康检查
HEALTH_CHECK_ENABLED=true

# 是否启用SQL日志
DATABASE_LOGGING=true

# ======================================
# 生产环境配置 (生产环境时修改)
# ======================================
# 生产环境域名
PRODUCTION_DOMAIN=your-domain.com

# SSL配置
SSL_ENABLED=false
SSL_CERT_PATH=
SSL_KEY_PATH=

# 监控配置
SENTRY_DSN=
PROMETHEUS_ENABLED=false